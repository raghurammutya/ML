# Ticker Service Environment Configuration
# Copy this file to .env and fill in your actual values
# NEVER commit .env files to version control!

# ============================================================================
# Application Configuration
# ============================================================================
ENVIRONMENT=development  # development, staging, production
LOG_DIR=logs

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_URL=redis://:YOUR_REDIS_PASSWORD@localhost:6379/0

# ============================================================================
# Database Configuration (TimescaleDB/PostgreSQL)
# ============================================================================
INSTRUMENT_DB_HOST=localhost
INSTRUMENT_DB_PORT=5432
INSTRUMENT_DB_NAME=stocksblitz_unified
INSTRUMENT_DB_USER=stocksblitz
INSTRUMENT_DB_PASSWORD=CHANGE_THIS_PASSWORD

# ============================================================================
# API Authentication (REQUIRED in production)
# ============================================================================
# IMPORTANT: Authentication is enabled by default
# Generate a strong random API key:
#   python3 -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEY_ENABLED=true
API_KEY=GENERATE_A_STRONG_RANDOM_API_KEY_HERE

# ============================================================================
# Encryption Keys (REQUIRED for secure credential storage)
# ============================================================================
# SEC-CRITICAL-003 & SEC-CRITICAL-004 FIX: Encryption keys are now required
# These keys encrypt sensitive data at rest (access tokens, credentials)
#
# Generate encryption key (choose ONE method):
#   Method 1 (Fernet - recommended): python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#   Method 2 (Hex): python3 -c "import os; print(os.urandom(32).hex())"
#
# CRITICAL: Store these keys securely! Loss of keys = loss of encrypted data
# CRITICAL: Never commit these keys to version control
# CRITICAL: Use secrets management in production (AWS Secrets Manager, etc.)
ENCRYPTION_KEY=GENERATE_ENCRYPTION_KEY_HERE

# Legacy key name (for backward compatibility with account encryption)
ACCOUNT_ENCRYPTION_KEY=GENERATE_ENCRYPTION_KEY_HERE

# ============================================================================
# Kite Connect API Credentials
# ============================================================================
# Get these from https://developers.kite.trade/
KITE_API_KEY=your_kite_api_key
KITE_API_SECRET=your_kite_api_secret
KITE_ACCESS_TOKEN=your_kite_access_token

# ============================================================================
# Mock Data Configuration
# ============================================================================
# Enable mock data generation outside market hours
# Set to false in production to only use real market data
ENABLE_MOCK_DATA=true

# ============================================================================
# Market Hours Configuration
# ============================================================================
# Times in 24-hour format for Asia/Kolkata timezone
MARKET_OPEN_TIME=09:15
MARKET_CLOSE_TIME=15:30
MARKET_TIMEZONE=Asia/Kolkata

# ============================================================================
# Performance Tuning (Optional - defaults are usually fine)
# ============================================================================
# Maximum instruments per WebSocket connection (default: 1000)
# MAX_INSTRUMENTS_PER_WS_CONNECTION=1000

# Order executor configuration
# ORDER_EXECUTOR_MAX_TASKS=10000
# ORDER_EXECUTOR_WORKER_POLL_INTERVAL=1.0
# ORDER_EXECUTOR_WORKER_ERROR_BACKOFF=5.0

# Instrument registry refresh cadence (hours)
# INSTRUMENT_REFRESH_HOURS=1

# ============================================================================
# PRODUCTION DEPLOYMENT NOTES
# ============================================================================
# 1. NEVER use default passwords or example values in production
# 2. Use environment-specific secrets management:
#    - AWS: AWS Secrets Manager or Parameter Store
#    - GCP: Secret Manager
#    - Azure: Key Vault
#    - Kubernetes: Sealed Secrets or External Secrets Operator
#    - HashiCorp Vault for any platform
#
# 3. Rotate API keys and secrets regularly (every 90 days minimum)
#
# 4. Set ENVIRONMENT=production to enforce security checks
#
# 5. Never commit .env files! Add to .gitignore:
#      .env
#      .env.local
#      .env.production
#      .env.*.local
